{% extends "base.html" %} {% block content %}
<div class="content">
  <h1>
    Schedule - Week of {{ schedule.week_start_date.strftime('%B %d, %Y') }}
  </h1>

  <table>
    <thead>
      <tr>
        <th>Day</th>
        <th>Date</th>
        <th>Shift Time</th>
      </tr>
    </thead>
    <tbody>
      {% for day in days_order %} {% set offset_days = day_offsets[day] %} {%
      set days_to_add = timedelta(days=offset_days) %} {% set event_date =
      schedule.week_start_date + days_to_add %}
      <tr
        class="{% if schedule.parsed_data[day] == 'Not Scheduled' %}not-scheduled-row{% endif %}"
      >
        <td><strong>{{ day }}</strong></td>
        <td>{{ event_date.strftime('%b %d') }}</td>
        <td>{{ schedule.parsed_data[day] }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <div class="button-container">
    {% if current_user.google_calendar_connected %}
    <a
      href="{{ url_for('add_to_google_calendar', schedule_id=schedule.id) }}"
      class="btn btn-primary"
    >
      ðŸ“… Add to Google Calendar
    </a>
    {% else %}
    <p style="color: #666; margin: 10px 0; text-align: center">
      <a href="{{ url_for('connect_google_calendar') }}"
        >Connect Google Calendar</a
      >
      to add events directly!
    </p>
    {% endif %}

    <a
      href="{{ url_for('export_ics', schedule_id=schedule.id) }}"
      class="btn btn-secondary"
    >
      ðŸ’¾ Download .ics File
    </a>
  </div>
</div>
{% endblock %}
